# 计算机网络面试题

[toc]

# I/O多路复用
## I/O多路复用的实现
I/O多路复用程序(事件驱动模型)能够在同一时间监视多个socket，一旦某个socket有动作发生了，那么I/O多路复用就会调用相应的程序来处理。
## I/O多路复用的意义
该模型一般是用于单线程的环境(Redis)，单线程的情况下就能够避免上下文切换带来的消耗，从而降低延迟，同时充分利用了单线程。
## select、poll、epoll的区别
这三个方法是I/O多路复用的底层实现。
**简答：**select能够监听socket，但是能监听的数量有限，而poll相当于无限制版的select，epoll相当于select/poll的增强版，能够提高CPU的利用率，以及fd就绪后就会调用回调函数。
**详细：**
1. 操作方式：select和poll是遍历，epoll是回调。
2. 底层实现：selec是数组，poll是链表，epoll是哈希表。
3. IO效率：select和poll都是线性遍历，epoll是事件通知的方式。
4. 最大连接数：select有限制(1024_x86，2048_x64)，poll和epoll没有。
5. fd拷贝：select和poll每次都需要把fd集合从用户态拷贝到内核态；调用epoll_ctl的时候直接拷贝进内核，之后每次epoll_wait不拷贝。


# TCP四次挥手
## close_wait的原理
在client向server发送关闭连接的请求后，server会在给client发送一个“知道请求”后，进入**close_wait**状态。
## 为什么会出现大量的close_wait
server因为要处理特别多的读写请求(IO阻塞)而没有能力去发送关闭连接请求。
## time_wait的原理
在第四次挥手的时候，client在收到**FIN**后，client就进入**time_wait**。client在进入**time_wait**状态后，经过**2MSL**后，连接正式关闭。

# DNS的查询过程
1. 先查询本机的hosts文件。
2. 本地DNS解析器缓存。
3. 查询本地DNS服务器。
4. 查询根DNS服务器。