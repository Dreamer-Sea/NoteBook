# Redis面试题

[toc]

# 如何解决MySQL和Redis一致性的问题？
1. 如果是要求严格的一致性，那么就将**读请求和写请求串行化，丢到一个内存队列里去执行**。
2. 先确认缓存被删除，再更新数据库。

# Redis的应用场景
1. 缓存
2. 共享Session
3. 消息队列
4. 分布式锁

## 结合项目
1. 缓存：将商品信息、用户信息提前读入Redis中，在618/双十一活动的时候，用户就能快速登录/浏览商品，提升用户体验，以及减小MySQL数据库的压力。
2. 共享Session：用户使用JWT登录后，将登录信息存储在Redis中，用户在不同服务之间跳转的时候，Session信息一直保存着，这样就能够实现单点登录了。
3. 分布式锁：当某一用户在修改后台商品信息时，需要先从Redis中获得锁，如果获得不了锁，那么用户就不能修改商品信息。

# 雪崩怎么解决？
1. 使用Redis高可用架构(集群)，来保证Redis服务不会宕掉。
2. 每个缓存的过期时间都不一致，使得过期时间最好时均匀分布的。
3. 限流降级。

# 缓存穿透怎么结果？
1. 在结口做校验。
2. 存null值。
3. 用布隆过滤器拦截。

# 并发竞争Key的解决方案
1. 分布式锁(Redlock)+时间戳。
2. 消息队列。

# Redis的线程模型
Redis使用的是**单线程的**、**非阻塞I/O的**，**多路复用的**线程模式。这些都是通过**文件事件处理器**来实现的。
## 文件事件处理器
文件事件处理器有以下几个部分：
1. 多个Socket。
2. I/O多路复用程序。
3. 文件事件分派器。
4. 事件处理器。
## 事件处理器
Redis中常用的事件处理器有：连接应答处理器、命令请求处理器和命令回复处理器。

