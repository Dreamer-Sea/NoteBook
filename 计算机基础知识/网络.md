# 网络
[toc]
## OSI七层模型
- 应用层：该层构建具体应用。**协议：Telnet，FTP，HTTP，DNS**。
- 表示层：该层对数据进行加密，解密，压缩和解压缩等。
- 会话层：在传输层的基础上建立连接和管理会话。
- 传输层：该层定义了传输数据的协议和端口号，主要用于数据的分段，传输和重组。**协议：TCP，UDP**。
- 网络层：该层对数据包中的IP地址进行解析和封装。该层数据被称为数据包。该层设备有：路由器，交换机和防火墙等。
- 数据链路层：该层对数据包中的MAC进行解析和封装。该层的数据被称为帧。在这层工作的设备有：网卡，网桥和交换机等。
- 物理层：定义了物理设备标准。该层的数据被称为比特。

## TCP/IP四层网络模型
TCP/IP协议簇。
- 应用层：负责具体应用层协议的定义。**协议：Telnet，FTP，SMTP，DNS，SMTP，NNTP和HTTP**。
- 传输层：除了基本的数据传输功能，还有可靠性保证，流量控制，多路复用，优先权和安全性控制等功能。
- 网络层：主要用于数据的传输，路由及地址的解析。**协议：IP，ARP**。
- 网络接口层：该层定义了主机间网络连通的协议。**协议：Echernet，FDDI，ATM等通信协议**。

## TCP三次握手

## TCP四次挥手

## HTTP

### 原理
HTTP是一个无状态协议，无状态指的是客户端和服务端之间不需要建立持久的连接。该协议遵循请求/应答模型，客户端发送请求，服务器端处理请求并返回适当的应答。

### 传输过程
- 地址解析：通过DNS解析服务器的域名从而获得主机的IP地址。
- 封装HTTP数据包：
- 封装TCP包：
- 建立TCP连接：三次握手。
- 客户端发送请求：
- 服务器响应：服务器响应客户端的请求，并返回相应的数据。
- 关闭TCP连接：TCP四次挥手。

## 状态码
- 1XX：信息码。
- 2XX：响应成功。
- 3XX：重定向。
- 4XX：客户端错误。
- 5XX：服务器错误。

## HTTPS
在HTTP的基础上加入了SSL层，对传输的数据进行了加密。

### 加密流程
- 发起请求：建立TCP连接后，客户端向服务器发送请求证书的消息，在该请求消息中包含了客户端可实现的算法列表和其它需要的信息。
- 证书返回：服务器在接收到请求之后，将会响应请求并返回证书。证书中包含服务器信息，域名，申请证书的公司，公钥，数据加密算法等。
- 证书验证：客户端在收到证书后，会检查证书的机构和使用公钥来确认签名。确认证书有效后，客户端会生成对称密钥，并使用公钥对密钥加密。
- 密钥交换：客户端将对称密钥发送给服务器，服务器在收到对称密钥后使用密钥对其解密。
- 数据传输：经过以上步骤后，客户端和服务器端就能够使用对称密钥进行数据传输了。

## 内容分发网络(CDN，Content Delivery Network)

### 关键技术
- 内容发布：
- 内容路由：
- 内容交换：
- 性能管理：

### 主要特点
- 本地缓存加速：将客户端经常访问的资源缓存在本地，提高系统的响应速度和稳定性。
- 镜像服务：消除不同运营商之间的网络差异。使得用户在不同的运营商中都有较好的网络体验。
- 远程加速：利用DNS负载均衡技术为用户选择服务质量最优的服务器，加快用户远程访问的速度。
- 带宽优化：自动生成服务器的远程镜像缓存服务器，使得远程用户能够从就近的缓存服务器上读取到数据，减少远程访问。
- 集群抗打击：通过网络安全技术和CDN之间的智能冗余机制，可以有效的减少网络攻击对网站的影响。

### 应用
- 内容分发系统：将用户请求的数据分发到距离用户较近的数个服务器上。
- 负载均衡系统：该系统是CDN的核心。该系统能够根据当前网络的流量分布，各中心机房服务器的复杂和用户请求的特点，将用户的请求负载到不同的中心机房或不同的服务器上，以保障用户内容访问的流畅性。
- 管理系统：该系统对整个CDN网络资源的运行状态进行实时监控和管理。

### 负载均衡算法
- 轮询均衡：将客户端请求轮流分配到1至N台服务器上，每台服务器均被均等地分配一定数量地客户端请求。该算法适合集群中所有服务器都有相同地软硬件配置和服务能力的情况下。
- 权重轮询均衡：该算法根据服务器的权重，轮询地分配客户端地请求。
- 随机均衡：将网络中地请求随机分配给内部的对台服务器。
- 权重随机均衡：类似于权重轮询算法。但是该算法在分配请求时不在轮询发送，而是随机选择某个权重的服务器发送。
- 响应速度均衡：根据负载均衡设备到各个服务器的响应速度的不同，将客户端发送的请求交给响应速度最快的服务器处理。这里的响应速度并不是客户端到服务器，所以存在偏差。
- 最少连接数均衡：负载均衡器内部记录当前每台服务器正在处理的连接数量，在有新的请求的时候，将请求分给给连接数最少的服务器。
- 处理能力均衡：该算法将请求分配给内部负荷最轻的服务器处理。
- DNS响应均衡：该算法使得所有的负载均衡设备都会收到来自客户端的域名解析请求，并且都会解析并返回结果IP，客户端会访问它收到的第一个IP地址。
- 散列算法均衡：使用一致性散列算法和虚拟节点技术将相同参数的请求都发送给同一台服务器。
- IP地址散列：同一客户端的请求总是被同一台服务器处理。
- URL散列：通过管理客户端请求URL信息的散列表，将相同URL的请求转发给同一台服务器。