# 消息队列

# 什么是消息队列？
1. 消息的存储工具；
2. 消息的管理工具；
3. 消息的监视工具；

# 为什么要使用消息队列？
1. 管理系统内的消息；
2. 降低系统的耦合性；
3. 降低分布式系统的复杂性；
4. 为系统削峰；
5. 异步处理系统内的消息；

# 消息队列的模型
1. P2P(点对点模式，某些消息队列中称这种为Queue)；
2. Pub/Sub(发布/订阅模式，能一对多，Topic)；

# 使用消息队列带来的问题
1. 要维护消息队列，避免消息队列宕机或消息丢失；
2. 系统复杂性提高，如何管理消息，保证消息重复，丢失和顺序问题；
3. 一致性问题，如何保证消息被正确的传递了，以及反馈消息是正确的；

# 消息队列的底层规范
|    对比方向    |                                       JMS                                      |                                                               AMQP                                                               |
|:--------------:|:------------------------------------------------------------------------------:|:--------------------------------------------------------------------------------------------------------------------------------:|
|      定义      |                                    Java API                                    |                                                               协议                                                               |
|     跨语言     |                                       否                                       |                                                                是                                                                |
|     跨平台     |                                       否                                       |                                                                是                                                                |
| 支持的消息模型 |                                1. P2P 2. Pub/Sub                               | 1. direct exchange 2. fanout exchange 3. topic exchange 4. headers exchange 5. system exchange (后四种和Pub/Sub模型没有太大差别) |
| 支持的消息类型 | 1. StreamMessage 2. MapMessage 3. TextMessage 4. ObjectMessage 5. BytesMessage |                                                              bytes[]                                                             |

