# 克隆与序列化

[toc]

# 克隆
想要对对象进行克隆的时候，如果使用的是**=**操作符，相当于把对象的内存地址复制给新的对象，一旦修改新的对象，旧的对象也跟着改变。

这时候就要使用**深/浅拷贝**来解决这个问题。想要被克隆的类要实现克隆接口并实现clone方法。其中浅拷贝只适合成员变量为基本数据类型的类，如果成员变量是对象，那么浅拷贝也只能复制对象的内存地址。

## 优点
1. 使用方便。
2. 性能高，clone方式是native方法。
3. 隔离性。

# 序列化
序列化也能够实现对对象真实克隆的效果。而且序列化实现的是**深拷贝**的效果，因为反序列化后的对象与原来的对象不在同一个内存地址上。

不需要序列化的对象可以用**transient**或**@transient**标记。

## 方式
在Java中序列化的方式有三种：
1. 原生方式，使用ObjectOutputStream(反序列化使用ObjectInputStream)。
2. JSON方式，生成JSON格式的字符串。
3. Hessian方式，能够跨语言。